(this["webpackJsonpmarketplace-frontend"]=this["webpackJsonpmarketplace-frontend"]||[]).push([[0],{144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),o=(n(77),n(78),n(23)),l=n.n(o),s=n(34),u=n(9),p=n(10),h=n(68),m=n(16),d=n(15),f=n(17),v=n(4),b=n(11),g=n(12),E=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(v.c,{style:{maxWidth:"300px",minWidth:"300px",margin:"1rem"}},r.a.createElement(v.d,null,r.a.createElement(v.f,null,this.props.name," ",r.a.createElement(v.a,{theme:"secondary"},this.props.version)),r.a.createElement("p",null,this.props.description),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(v.b,null,r.a.createElement(g.a,{icon:b.b})," Install"),r.a.createElement(v.b,{theme:"secondary",href:"https://lightainer-api.frozencloud.de?id="+this.props.id,target:"_blank"},r.a.createElement(g.a,{icon:b.d})," Details"))),r.a.createElement(v.e,{className:"small"},this.props.author," \u2022 ",(new Date).toDateString()))}}]),t}(r.a.Component),k=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.message)}}]),t}(r.a.Component),O=function(){function e(){Object(u.a)(this,e),this.eventHandler=new h.EventEmitter}return Object(p.a)(e,[{key:"getData",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://lightainer-api.frozencloud.de").then(function(){var e=Object(s.a)(l.a.mark((function e(n){var a,c,i,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,c=!1,i=void 0,e.prev=3,e.next=6,n.json();case 6:e.t0=Symbol.iterator,o=e.sent[e.t0]();case 8:if(a=(s=o.next()).done){e.next=14;break}u=s.value,t.push(r.a.createElement(E,{key:u._id,id:u._id,name:u.name,version:u.version,author:u.author,description:u.description}));case 11:a=!0,e.next=8;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(3),c=!0,i=e.t1;case 20:e.prev=20,e.prev=21,a||null==o.return||o.return();case 23:if(e.prev=23,!c){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[3,16,20,28],[21,,23,27]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e.message),t.push(r.a.createElement(k,{message:"Something went wrong with Loading the Packets."}))}));case 3:this.eventHandler.emit("packets",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),j=n(43),y=n(21),w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={open:!1},n.toggle=n.toggle.bind(Object(y.a)(n)),n.state={name:"",version:"",description:""},n.handleInputChange=n.handleInputChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleClose=n.handleClose.bind(Object(y.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.id;this.setState(Object(j.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=this.state).author="Marketplace",e.next=5,fetch("https://lightainer-api.frozencloud.de",{method:"POST",mode:"no-cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(n)});case 5:this.props.marketplaceApi.getData(),this.setState({name:"",version:"",description:"",open:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"handleClose",value:function(e){e.preventDefault(),this.setState({name:"",version:"",description:"",open:!1})}},{key:"render",value:function(){var e=this.state.open;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.v,{active:!0,onClick:this.toggle,href:"#"},r.a.createElement(g.a,{icon:b.e})," Add Packet"),r.a.createElement(v.q,{open:e,toggle:this.toggle},r.a.createElement(v.s,null,r.a.createElement("span",{role:"img","aria-label":"Packet"},"\ud83d\udce6")," Add a Packet"),r.a.createElement(v.r,null,r.a.createElement(v.i,{onSubmit:this.handleSubmit},r.a.createElement(v.k,null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement(v.l,{id:"name",placeholder:"Packet Name",value:this.state.name,onChange:this.handleInputChange})),r.a.createElement(v.k,null,r.a.createElement("label",{htmlFor:"version"},"Version"),r.a.createElement(v.l,{id:"version",placeholder:"1.0.0",value:this.state.version,onChange:this.handleInputChange})),r.a.createElement(v.k,null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement(v.m,{id:"description",placeholder:"Packet Description Text",value:this.state.description,onChange:this.handleInputChange})),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(v.b,{type:"submit"},r.a.createElement(g.a,{icon:b.e})," Add Packet"),r.a.createElement(v.b,{theme:"secondary",onClick:this.handleClose},r.a.createElement(g.a,{icon:b.h})," Cancel"))),r.a.createElement(v.j,null))))}}]),t}(r.a.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).toggleNavbar=n.toggleNavbar.bind(Object(y.a)(n)),n.state={collapseOpen:!1},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"toggleNavbar",value:function(){this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state,{},{collapseOpen:!this.state.collapseOpen}))}},{key:"render",value:function(){return r.a.createElement(v.w,{type:"dark",theme:"primary",expand:"md",sticky:"top"},r.a.createElement(v.x,{href:"",onClick:function(e){e.preventDefault(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.update()})),window.location.reload()}},r.a.createElement(g.a,{icon:b.g})," Lightainer Marketplace"),r.a.createElement(v.y,{onClick:this.toggleNavbar}),r.a.createElement(v.g,{open:this.state.collapseOpen,navbar:!0},r.a.createElement(v.t,{navbar:!0},r.a.createElement(v.u,null,r.a.createElement(v.v,{active:!0,href:"/marketplace"},r.a.createElement(g.a,{icon:b.c})," Home")),r.a.createElement(v.u,null,r.a.createElement(w,{marketplaceApi:this.props.marketplaceApi})),r.a.createElement(v.u,null,r.a.createElement(v.v,{active:!0,href:"#"},r.a.createElement(g.a,{icon:b.a})," My Packets"))),r.a.createElement(v.t,{navbar:!0,className:"ml-auto"},r.a.createElement(v.n,{size:"sm",seamless:!0},r.a.createElement(v.o,{type:"prepend"},r.a.createElement(v.p,null,r.a.createElement(g.a,{icon:b.f}))),r.a.createElement(v.l,{className:"border-0",placeholder:"Search..."})))))}}]),t}(r.a.Component),N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={packets:[r.a.createElement("div",{className:"spinner-border",role:"status",key:"pm_spinner"},r.a.createElement("span",{className:"sr-only"},"Loading..."))]},n.props.marketplaceApi.eventHandler.on("packets",(function(e){n.setState({packets:e})})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(v.h,{className:"d-flex flex-wrap justify-content-center mt-3"},this.state.packets)}}]),t}(r.a.Component),D=new O;var A=function(){return D.getData(),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{marketplaceApi:D}),r.a.createElement(N,{marketplaceApi:D}))};i.a.render(r.a.createElement(A,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/marketplace",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/marketplace","/service-worker.js");C?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()},72:function(e,t,n){e.exports=n(144)}},[[72,1,2]]]);
//# sourceMappingURL=main.527b96b4.chunk.js.map